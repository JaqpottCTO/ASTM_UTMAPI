openapi: 3.1.1
info:
  description: >-
    Interface definitions for the Demand Capacity Balancing function within the Providers of Services to UAM (PSU)
    interoperability network. Functionality includes sharing demand capacity balancing information and receiving 
    operation intent details from other PSU OIM functions.
  version: 0.0.0
  title: ASTM UAM PSU DCB API
servers:
- url: /
security:
- Authority:
  - utm.strategic_coordination
  - utm.resource_management
  - utm.availability_arbitration
  - utm.dcb_check
tags:
- name: Imbalance monitoring 
  description: |-
    Endpoints exposed by PSU DCBs to allow OIMs to request monitoring for specific operational intents
    for demand and capacity issues. 
- name: Imbalance checks
  description: Endpoints exposed by PSU DCBs to allow for on-demand imbalance checks. 
- name: Resource availability
  description: Endpoints exposed by PSU DCBs to allow for query for intervals where a specified resource
    has availability.
- name: Reports
  description: Endpoints exposed by the PSUs for reporting peer PSU issues.
- name: Availability
  description: Endpoints exposed by the DSS for declaring USS availability.
 
paths:
  /dcb/v1/imbalance_subscriptions/{subscriptionid}:
    summary: Create/read endpoint for a specific subscription in the DCB
    get:
      tags:
      - Imbalance monitoring 
      summary: Retrieve the specified imbalance subscription from the DCB.
      description: Retrieve a specific subscription.
      operationId: getImbalanceSubscription
      parameters:
      - name: subscriptionid
        in: path
        description: SubscriptionID of the subscription of interest.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionID'
      responses:
        "200":
          description: Subscription information was retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImbalanceSubscription'
        "400":
          description: One or more input parameters were missing or invalid.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: The access token was decoded successfully but did not include a scope appropriate to this endpoint.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "404":
          description: A subscription with the specified ID was not found.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.dcb_check
    put:
      tags:
      - Imbalance monitoring 
      summary: Create the specified imbalance subscription in the DSS.
      description: |-
        Create a subscription.
      operationId: createImbalanceSubscription
      parameters:
      - name: subscriptionid
        in: path
        description: SubscriptionID of the subscription of interest.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateImbalanceSubscriptionParameters'
        required: true
      responses:
        "200":
          description: A new subscription was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImbalanceSubscription'
        "400":
          description: |-
            * One or more input parameters were missing or invalid.
            * The request attempted to mutate the subscription in a disallowed way.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint or the request.
            * Client attempted to request notifications for an Entity type to which the scopes included in the access token do not provide access.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            * A subscription with the specified ID already exists.
            * Despite repeated attempts, the DSS was unable to complete the update because of other simultaneous changes.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client may have issued too many requests within a small period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.dcb_check
  /dcb/v1/imbalance_subscriptions/{subscriptionid}/{version}:
    summary: Update/delete a specific imbalance subscription in the DCB.
    put:
      tags:
      - Imbalance monitoring
      summary: Update the specified imbalance subscription in the DCB.
      description: |-
        Update a subscription.
      operationId: updateImbalanceSubscription
      parameters:
      - name: subscriptionid
        in: path
        description: SubscriptionID of the subscription of interest.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionID'
      - name: version
        in: path
        description: Version of the subscription to be modified.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateImbalanceSubscriptionParameters'
        required: true
      responses:
        "200":
          description: A subscription was updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImbalanceSubscription'
        "400":
          description: |-
            * One or more input parameters were missing or invalid.
            * The request attempted to mutate the subscription in a disallowed way.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint or the request.
            * Client attempted to request notifications for an Entity type to which the scopes included in the access token do not provide access.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            * A subscription with the specified ID already exists and is managed by a different client.
            * The provided `version` does not match the current subscription.
            * Despite repeated attempts, the DSS was unable to complete the update because of other simultaneous changes.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client may have issued too many requests within a small period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.dcb_check
    delete:
      tags:
      - Imbalance monitoring
      summary: Delete the specified imbalance subscription in the DCB.
      description: |-
        Delete a subscription.
      operationId: deleteImbalanceSubscription
      parameters:
      - name: subscriptionid
        in: path
        description: SubscriptionID of the subscription of interest.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionID'
      - name: version
        in: path
        description: Version of the subscription to be modified.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: A subscription was successfully removed from the DCB.
        "400":
          description: |-
            * One or more input parameters were missing or invalid.
            * The request attempted to mutate the subscription in a disallowed way.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint or the request.
            * Client attempted to request notifications for an Entity type to which the scopes included in the access token do not provide access.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            * A subscription with the specified ID already exists and is managed by a different client.
            * The provided `version` does not match the current subscription.
            * Despite repeated attempts, the DSS was unable to complete the update because of other simultaneous changes.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client may have issued too many requests within a small period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.dcb_check
  /dcb/v1/imbalance/intent:
    post:
      description: >-
        Demand-capacity imbalance detection endpoint that requires users to submit 
        a planned trajectory to detect whether the resources included in this 
        operational intent are below, at, or above available capacity. The returned 
        demand-capacity imbalance responses do NOT include contributions from the planned 
        operational intent but only consider operational intents known to DSS. This endpoint
        is intended to return details sufficient for submitting the operational intent
        to the DSS and other OIMs with ONLY the returned information. 
      tags:
        - Imbalance checks
      summary: >-
        Demand-capacity imbalance detection endpoint that requires users to submit 
        a planned trajectory to detect whether the resources included in this 
        operational intent are below, at, or above available capacity. The returned 
        demand-capacity imbalance responses do NOT include contributions from the planned 
        operational intent but only consider operational intents known to DSS. This endpoint
        is intended to return details sufficient for submitting the operational intent
        to the DSS and other OIMs with ONLY the returned information. 
      operationId: postImbalanceIntent
      parameters:
        - name: existingOperationalIntentId
          in: query
          required: false
          description: If this call is testing an different trajectory for an existing
            flight instance, the existing flight instance id must be provided.  The DCB 
            will need to ignore the existing resource usage for this flight intent and only
            consider the trajectory provided in the body. 
          schema:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        - name: returnAvailability
          in: query
          required: false
          description: If imbalances are detected with the trajectory, return a list
            of availability blocks for each of the resources. 
          schema:
            type: boolean
            default: false
        - name: timeBufferBefore
          in: query
          required: false
          description: Parameter defining a time buffer in minutes before the resource ETA
            for which availability time ranges are requested. 
          schema:
            type: integer
            minimum: 0
            maximum: 120
            default: 0
        - name: timeBufferAfter
          in: query
          required: false
          description: Parameter defining a time buffer in minutes after the resource ETA
            for which availability time ranges are requested. 
          schema:
            type: integer
            minimum: 0
            maximum: 120
            default: 0
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IntentBasedImbalanceRequest'
      responses:
        '200':
          description: >-
            Demand-capacity imbalance status for the resources included in the planned operational intent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntentBasedImbalanceResponse'
        '400':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: >-
            One or more parameters were missing or invalid.
        '401':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Bearer access token was not provided in Authorization header,
            token could not be decoded, or token was invalid.
        '415':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Request Content-type header was different from the required application/json.
        '429':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            The number of requests exceeded DCB processing capabilities. The client should wait and then retry sending the request.
        '500':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service error.
        '503':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service availability error triggered by unavailability of one or more required services such as DSS.
      security:
      - Authority:
        - utm.dcb_check        
  /dcb/v1/imbalance/recheck:
    post:
      description: >-
        Demand-capacity imbalance detection recheck endpoint that allows users to 
        detect whether the resources intersected by this operational intent are below, at, or 
        above available capacity. The OIM must already have subscribed to the
        DCB and provided the latest operational intent trajectory for this operation.  The returned 
        demand-capacity imbalance responses do NOT include contributions from the planned 
        operational intent but only consider operational intents known to DSS. This endpoint
        is intended to return details sufficient for submitting the operational intent
        to the DSS and other OIMs with ONLY the returned information. 
      tags:
        - Imbalance checks
      summary: >-
        Demand-capacity imbalance detection recheck endpoint that allows users to 
        detect whether the resources intersected by this operational intent are below, at, or 
        above available capacity. The OIM must already have subscribed to the
        DCB and provided the latest operational intent trajectory for this operation.  The returned 
        demand-capacity imbalance responses do NOT include contributions from the planned 
        operational intent but only consider operational intents known to DSS. This endpoint
        is intended to return details sufficient for submitting the operational intent
        to the DSS and other OIMs with ONLY the returned information. 
      operationId: postImbalanceRecheck
      parameters:
        - name: existingOperationalIntentId
          in: query
          required: true
          description: The operational intent to recheck.  This operational intent must already
            be included within an existing imbalance subscription with this DCB. 
          schema:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IntentBasedImbalanceRecheckRequest'            
      responses:
        '200':
          description: >-
            Demand-capacity imbalance status for the resources included in the planned operational intent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IntentBasedImbalanceRecheckResponse'
        '400':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: >-
            One or more parameters were missing or invalid.
        '401':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Bearer access token was not provided in Authorization header,
            token could not be decoded, or token was invalid.
        '415':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Request Content-type header was different from the required application/json.
        '429':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            The number of requests exceeded DCB processing capabilities. The client should wait and then retry sending the request.
        '500':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service error.
        '503':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service availability error triggered by unavailability of one or more required services such as DSS.
      security:
      - Authority:
        - utm.dcb_check
  /dcb/v1/imbalance/query:
    post:
      description: >-
        Demand-capacity imbalance detection endpoint that requires users to submit a 
        specification of area of interest defined as volume or a list of resources 
        to detect whether the resources included in this query are under, at, or over available capacity. 
        This endpoint returns resource and operation details sufficient for submitting an operation
        to the DSS, but does not include operational intent extent and resource crossing details. It will
        be left to the caller to build this information before submitting to the DSS and other OIMs. 
      tags:
        - Imbalance checks
      summary: >-
        Demand-capacity imbalance detection endpoint that requires users to submit a 
        specification of area of interest defined as volume or a list of resources 
        to detect whether the resources included in this query are under, at, or over available capacity. 
        This endpoint returns resource and operation details sufficient for submitting an operation
        to the DSS, but does not include operational intent extent and resource crossing details. It will
        be left to the caller to build this information before submitting to the DSS and other OIMs. 
      operationId: queryImbalanceAreaOrResources
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AreaOrResourceBasedImbalanceRequest'
      responses:
        '200':
          description: >-
            Demand-capacity imbalance status for the resources included in the area of interest
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImbalanceResponse'
        '400':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: >-
            One or more parameters were missing or invalid.
        '401':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Bearer access token was not provided in Authorization header,
            token could not be decoded, or token was invalid.
        '415':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Request Content-type header was different from the required application/json.
        '429':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            The number of requests exceeded DCB processing capabilities. The client should wait and then retry sending the request.
        '500':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service error.   
        '503':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service availability error triggered by unavailability of one or more required services such as DSS.
      security:
      - Authority:
        - utm.dcb_check
  /dcb/v1/availability:
    get:
      description: >-
        Resource availability endpoint that provides information on available time intervals 
        for a given resource, i.e., time intervals during which demand is below available capacity.
      tags:
        - Resource availability
      summary: >-
        Resource availability endpoint that provides information on available time intervals for a given resource, i.e., 
        time intervals during which demand is below available capacity. 
      operationId: getAvailabilityByResource
      parameters:
        - name: resourceIds
          in: query
          required: true
          description: List of resources to check availability during the time range specified. 
          schema:
            type: array
            items: 
              $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        - name: time_start
          in: query
          required: true
          description: Parameter defining the start time for querying resource availability
          schema:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        - name: time_end
          in: query
          required: true
          description: Parameter defining the end time for querying resource availability
          schema:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
      responses:
        '200':
          description: >-
            Resource availability information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceAvailabilityList'
        '400':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: >-
            One or more parameters were missing or invalid.
        '401':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Bearer access token was not provided in Authorization header,
            token could not be decoded, or token was invalid.   
        '404':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            Provided resname is not a valid vertiport name. 
        '429':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            The number of requests exceeded the processing capabilities. The client should wait and then retry sending the request.
        '500':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB server or processing error.
        '503':
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
          description: |-
            DCB service availability error triggered by unavailability of one or more required services such as DSS.
      security:
      - Authority:
        - utm.dcb_check
  /dcb/v1/resource_details:
    summary: RIS shares detailed information about a resource. 
    post:
      tags:
      - Resource references
      - Resource capacities
      - Resource definition
      - Resource status
      - p2p_uam
      summary: Notify a peer PSU of changed resource details.
      description: Notify a peer PSU directly of changed resource details (usually as a requirement of previous interactions with the DSS).
      operationId: notifyResourceDetails
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutResourceDetails'
        required: true
      responses:
        "204":
          description: New or updated full resource information received successfully.
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The Entity could not be parsed, or contains illegal data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint.
            * The client identified in the access token is not the manager of this Entity according to the receiving client's records.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            The Entity version specified in this message is lower than
            a previously-received notification, or identical to a previously-received
            notification and the Entity is different.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.resource_management
  /dcb/v1/resource_details/{entityid}:
    summary: |-
      endpoint hosted by DCB to allow RIS to share detailed information about a resource in response to a 
      subscription that the DCB has with the DSS. 
    put:
      tags:
      - Resource references
      - Resource capacities
      - Resource definition
      - Resource status
      - p2p_uam
      summary: Notify a peer PSU of changed resource details.
      description: Notify a peer PSU directly of changed resource details (usually as a requirement of previous interactions with the DSS).
      operationId: notifyResourceDetailsChanged
      parameters:
      - name: entityid
        in: path
        description: EntityID for this resource.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutResourceDetails'
        required: true
      responses:
        "204":
          description: New or updated full resource information received successfully.
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The Entity could not be parsed, or contains illegal data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint.
            * The client identified in the access token is not the manager of this Entity according to the receiving client's records.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            The Entity version specified in this message is lower than
            a previously-received notification, or identical to a previously-received
            notification and the Entity is different.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.resource_management
  /dcb/v1/operational_intents:
    summary: A PSU OIM's representation of detailed information about new operational intents.
    post:
      tags:
      - Operational intent details
      - p2p_uam
      summary: Notify a peer PSU of new operational intent details.
      description: Notify a peer PSU directly of new operational intent details (usually as a requirement of previous interactions with the DSS).
      operationId: notifyOperationalIntentDetails
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutOperationalIntentDetailsParameters'
        required: true
      responses:
        "204":
          description: New or updated full operational intent information received successfully.
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The Entity could not be parsed, or contains illegal data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint.
            * The client identified in the access token is not the manager of this Entity according to the receiving client's records.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            The Entity version specified in this message is lower than
            a previously-received notification, or identical to a previously-received
            notification and the Entity is different.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.strategic_coordination
  /dcb/v1/operational_intents/{entityid}:
    summary: Receive detailed information of an operational intent from a PSU OIM role because of a subscription with the DSS.
    put:
      tags:
      - Operational intent details
      - p2p_uam
      summary: Update the specified operational intent details for another PSU.
      description: |-
        The PSU managing an operation uses this endpoint to updates the details (and reference) of an
        operational intent it manages with the PSU that hosts the endpoint, typically in response to a 
        subscription in the DSS.
      operationId: notifyOperationalIntentDetailsChanged
      parameters:
      - name: entityid
        in: path
        description: EntityID for this operational intent.
        required: true
        style: simple
        explode: false
        schema:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PutOperationalIntentDetailsParameters'
        required: true
      responses:
        "204":
          description: New or updated full operational intent information received successfully.
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The Entity could not be parsed, or contains illegal data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint.
            * The client identified in the access token is not the manager of this Entity according to the receiving client's records.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            The Entity version specified in this message is lower than
            a previously-received notification, or identical to a previously-received
            notification and the Entity is different.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.strategic_coordination
  /dcb/v1/reports:
    summary: Error reports of issues communicating with a peer PSU.
    post:
      tags:
      - Reports
      - p2p_uam
      summary: Notify PSU of an error encountered that might otherwise go unnoticed.
      description: "Endpoint to provide feedback (errors, etc.) that might otherwise go unnoticed by this PSU.  This endpoint is used for all feedback related to operational intents and constraints."
      operationId: makePsuReport
      requestBody:
        content:
          application/json:
            schema:
              $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorReport'
        required: true
      responses:
        "201":
          description: Report received and successfully archived.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorReport'
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The report could not be parsed, or contains unrecognized data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: |-
            Bearer access token was not provided in Authorization header,
            token could not be decoded, or token was invalid.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: '* The access token was decoded successfully but did not include a scope appropriate to this endpoint.'
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.strategic_coordination
      - Authority:
        - utm.availability_arbitration
      - Authority:
        - utm.resource_management
      - Authority:
        - utm.dcb_check
  /dcb/v1/uss_availability:
    summary: Share USS availability with users of the airspace. 
    post:
      tags:
      - Availability
      summary: Notify a peer of USS availability change.
      description: Notify a peer of USS availability change which has been reported by 
        a source with utm.availability_arbitration scope. 
      operationId: notifyAvailabilityArbitrationChange
      requestBody:
        content:
          application/json:
            schema:
              $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/PutUssAvailabilityDetails'
        required: true
      responses:
        "204":
          description: New or updated full operational intent information received successfully.
        "400":
          description: |-
            * One or more parameters were missing or invalid.
            * The Entity could not be parsed, or contains illegal data.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "401":
          description: "Bearer access token was not provided in Authorization header, token could not be decoded, or token was invalid."
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "403":
          description: |-
            * The access token was decoded successfully but did not include a scope appropriate to this endpoint.
            * The client identified in the access token is not the manager of this Entity according to the receiving client's records.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "409":
          description: |-
            The Entity version specified in this message is lower than
            a previously-received notification, or identical to a previously-received
            notification and the Entity is different.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
        "429":
          description: The client issued too many requests in a short period of time.
          content:
            application/json:
              schema:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ErrorResponse'
      security:
      - Authority:
        - utm.availability_arbitration
components:
  securitySchemes:
    fimsAzAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |- 
         This security scheme is applied to all operations, and the bearer token
         must be acquired from the FIMS-AZ. The scope must be 'utm.strategic_coordination'.        
  schemas:
    IntentTrajectoryPoint:
      type: object
      required:
        - altitude
        - lat_lng_point
        - speed
        - time
        - trajectory_property_array
      properties:
        lat_lng_point:
          description: "Latitude and Longitude of the point."
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/LatLngPoint'
        altitude:
          description: "Altitude of the point. If this is for a named airspace structure point from ASDS, it should be the same value as from ASDS."
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Altitude'
        time:
          description: Estimated time when the vehicle will be at the location of the TrajectoryPoint
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        speed:
          description: |-
            Speed of the vehicle at this TrajectoryPoint.
            FIXM allows for two speed entries:  predictedAirspeed and predictedGroundspeed
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Velocity'
        trajectory_property_array:
          maxItems: 4
          minItems: 1
          type: array
          description: |-
            Describes any applicable properties of the trajectory point.
            May include multiple properties per point. FIXM allows up to 2000 properties per
            trajectory point. For X4 we are allowing up to 4.
            The first point of initial plan must include at a minimum: AIRPORT_REFERENCE_LOCATION, WHEELS_OFF
            The last point must include at a minimum: AIRPORT_REFERENCE_LOCATION, WHEELS_ON
          externalDocs:
            url: https://fixm.aero/releases/FIXM-4.2.0/doc/schema_documentation/Fixm_TrajectoryPoint4DType.html#Link2AC
          items:
            $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/TrajectoryProperty'
    IntentTrajectory:
      type: object
      required:
        - points
      properties:
        points:
          type: array
          description: "The list of TrajectoryPoints for this operation.  This list must contain\nall significant TrajectoryPoints per the CBRs. For additional insight on \npoints to be included, see the enumeration of property types in the \nTrajectoryPoint4D model."
          items:
            $ref: '#/components/schemas/IntentTrajectoryPoint'
    IntentBasedImbalanceRequest:
      type: object
      required:
        - intent_trajectory
      properties:
        intent_trajectory:
          $ref: '#/components/schemas/IntentTrajectory'
          description: >-
            Operational intent that is being planned and for which resource demand capacity 
            imbalances need to be checked. The 'ovn' attribute in the operational intent reference 
            is not required/processed since it is assumed that this DCB endpoint is checked first 
            before communicating with DSS.
        required_additional_operations:
          $ref: '#/components/schemas/RequiredAdditionalOperations'
        required_additional_resources:
          $ref: '#/components/schemas/RequiredAdditionalResources'
    IntentBasedImbalanceRecheckRequest:
      type: object
      properties:
        required_additional_operations:
          $ref: '#/components/schemas/RequiredAdditionalOperations'
        required_additional_resources:
          $ref: '#/components/schemas/RequiredAdditionalResources'
    IntentBasedImbalanceRecheckResponse:
      type: object
      required:
        - resource_extents
        - is_dcb_compliant
      properties:
        is_dcb_compliant:
          type: boolean
          description: Returns true if the trajectory is DCB compliant (no imbalances). 
            Returns false if any imbalances exist (trajectory non-DCB compliant). 
        resource_extents:
          required:
          - extents
          type: object
          properties: 
            extents:
              description: |-
                List of resources and crossing OR entry/exit times when the resource
                will be occupied by the  Operational Intent.  These extents are intended to be
                shared with the DSS when the Operation Intent is submitted/updated. Note that OVNs 
                included in resource_extents cover all operational intents using the resource time
                windows intersected by the submitted trajectory and all operational intents using 
                any resource time windows that overlap the time buffers specified in the request.
              $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ResourceExtents'
    ExtentUpdateRequest:
      type: object
      required: 
        - operational_intent_id
        - trajectory
        - resource_extents
        - resource_imbalances
        - is_dcb_compliant
      properties: 
        operational_intent_id:
          description: The ID of the operational intent (as shared with the DSS and other entities)
            which must be updated. 
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        is_dcb_compliant:
          type: boolean
          description: Returns true if the trajectory is DCB compliant (no imbalances). 
            Returns false if any imbalances exist (trajectory non-DCB compliant). 
        trajectory:
          maxItems: 1000
          minItems: 2
          type: array
          description: The list of TrajectoryPoints for this operation which are to be shared
            with other stakeholders as part of the OperationalIntentDetails.  
            This list must contain all significant TrajectoryPoints per the CBRs. Interpolation may be 
            needed to identify these points. For additional insight on points to be included, see the 
            enumeration of property types in the TrajectoryPoint4D model. In addition, each trajectory 
            point includes details of any resource(s) which are being utilized by the trajectory and 
            an indication if this is a crossing for waypoint-based resources or an entry/exit for 
            volume-based resources.
          items:
            $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/TrajectoryPoint4D'
        resource_extents:
          required:
          - extents
          type: object
          properties: 
            extents:
              minItems: 1
              type: array
              description: |-
                List of resources and crossing OR entry/exit times when the resource
                will be occupied by the  Operational Intent.  These extents are intended to be
                shared with the DSS when the Operation Intent is submitted/updated. 
              items:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ResourceExtent'
        resource_imbalances:
          type: array
          items:
            $ref: '#/components/schemas/ResourceDemandCapacityImbalances'
          default: []
      description: >- 
        Request from DCB to OIM indicating that the resource extents and trajectory previously shared with
        the DSS and other OIMs for this flight instance is out of date.  This can happen if a new resource is added to the system or
        an existing resource is modified in a way which would cause updates to how an existing trajectory is interacting with
        the resource (ex. change to physical definition including altitude, location, or size or shape changes).
    IntentBasedImbalanceResponse:
      type: object
      required:
        - trajectory
        - resource_extents
        - resource_imbalances
        - is_dcb_compliant
      properties:
        is_dcb_compliant:
          type: boolean
          description: Returns true if the trajectory is DCB compliant (no imbalances). 
            Returns false if any imbalances exist (trajectory non-DCB compliant). 
        trajectory:
          maxItems: 1000
          minItems: 2
          type: array
          description: The list of TrajectoryPoints for this operation which are to be shared
            with other stakeholders as part of the OperationalIntentDetails.  
            This list must contain\nall significant TrajectoryPoints per the CBRs. For additional insight on 
            points to be included, see the enumeration of property types in the TrajectoryPoint4D model.
            In addition, each trajectory point includes details of any resource(s) which are being utilized
            by the trajectory and an indication if this is a crossing for waypoint-based resources or an 
            entry/exit for volume-based resources. 
          items:
            $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/TrajectoryPoint4D'
        resource_extents:
          required:
          - extents
          type: object
          properties: 
            extents:
              minItems: 1
              type: array
              description: |-
                List of resources and crossing OR entry/exit times when the resource
                will be occupied by the  Operational Intent.  These extents are intended to be
                shared with the DSS when the Operation Intent is submitted/updated. 
              items:
                $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ResourceExtent'
        resource_imbalances:
          type: array
          items:
            $ref: '#/components/schemas/ResourceDemandCapacityImbalances'
          default: []
        availability:
          description: Includes a list of all utilized resources with ranges of time when 
            the resource is below capacity.  OVNs are not included.  It is assumed the caller
            will adjust the trajectory to utilize the resources at new times and will submit
            an updated request. 
          type: array
          items: 
            $ref: '#/components/schemas/ResourceAvailability'
      description: >- 
            Response to an intent based imbalance request. Returns the original trajectory
            (may be truncated to remove unimportant points) along with resource ids and crossing times
            and trajectory properties.  Ideally this response could be plugged into the OperationalIntentDetails
            shared with PSUs and OperationalIntentReference shared with the DSS.  
    CreateImbalanceSubscriptionParameters:
      required:
      - uss_base_url
      type: object
      properties:
        uss_base_url:
          description: "The base URL of a USS implementation of the parts of the USS-USS API necessary for receiving the notifications that the operational intent must be aware of.  This includes, at least, notifications for relevant changes in operational intents."
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionUssBaseURL'
        add_operational_intents:
          type: array
          description: Operational intents to add for monitoring. 
          items:
            $ref: '#/components/schemas/OperationalIntentForMonitoring'
          default: []
    OperationalIntentForMonitoring:
      required:
        - operational_intent_id
        - operational_intent_reference
      type: object
      properties:
        operational_intent_id:
          description: The ID of the operational intent (as shared with the DSS and other entities). 
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        operational_intent_reference:
          description: The operational intent reference (as shared with the DSS and other entities)
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/OperationalIntentReference'
        operational_intent_details:
          description: The operational intent details shared with other stakeholders.
          $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/OperationalIntentDetails'
    ImbalanceSubscription:
      required:
      - subscription_id
      - uss_base_url
      - operational_intents_monitored
      - version
      type: object
      properties:
        subscription_id:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionID'
          description: ID of the DCB monitoring subscription. 
        uss_base_url:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionUssBaseURL'
          description: Base URL which will be called when a DCB imbalance is detected for one 
            of the operational intents monitored by this subscription. 
        operational_intents_monitored:
          type: array
          description: List of IDs for operational intents that are monitored as part of this DCB. 
          items:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
          default: []
        version:
          type: string
          description: Version of the subscription that the DCB changes every time a OIM changes the subscription.  
            The DCB incrementing the notification_index does not constitute a change that triggers a new version.  
            A USS must specify this version when modifying an existing subscription to ensure consistency in read-modify-write operations and distributed systems.
      description: Subscription details, callback URL, and list of operational intents monitored by this DCB. 
    UpdateImbalanceSubscriptionParameters:
      type: object
      required:
      - version
      properties:
        update_operational_intents:
          type: array
          description: Operational intents either to add for monitoring or for which the operational intent is being updated. 
          items:
            $ref: '#/components/schemas/OperationalIntentForMonitoring'
          default: []
        remove_operational_intents:
          type: array
          description: Operational intents to remove from monitoring. 
          items:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
          default: []
        version:
          type: string
          description: Version of the subscription that the DCB changes every time a OIM changes the subscription.  
            The DCB incrementing the notification_index does not constitute a change that triggers a new version.  
            A USS must specify this version when modifying an existing subscription to ensure consistency in read-modify-write operations and distributed systems.
    AreaOrResourceBasedImbalanceRequest:
      type: object
      properties:
        area_of_interest:
          description: |-
            Volume of airspace to query for resource imbalance details. 
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Volume3D'
        resource_ids:
          description: List of resources for which to query. 
          type: array
          items:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        time_start:
          description: Start time for resource availability query.  If start time is not specified, 
            it will default to the time the request is processed. 
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        time_end:
          description: End time of resource availability query. If end time is not specified, the 
            value will be chosen automatically by the DSS. The end time may not be in the past.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        required_additional_operations:
          $ref: '#/components/schemas/RequiredAdditionalOperations'
        required_additional_resources:
          $ref: '#/components/schemas/RequiredAdditionalResources'
    ImbalanceResponse:
      type: object
      required:
        - resource_imbalances
      properties:
        resource_imbalances:
          type: array
          items:
            $ref: '#/components/schemas/ResourceDemandCapacityImbalances'
    ContributingOperation:
      type: object
      description: Basic details of an operation contributing to demand or imbalance. 
      required:
        - operational_intent_id
        - resource_temporal_usage
        - priority_rank
        - is_dcb_compliant
      properties:
        operational_intent_id:
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
          description: Operational intent ID of the operation
        resource_temporal_usage:
          description: |-
            Duration of time for a volume based resource, or crossing Time
            for a waypoint based resource. 
          oneOf:
            - $ref: "../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ResourceCrossing"
            - $ref: "../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/ResourceOccupationDuration" 
        priority_rank: 
          description: The absolute priority rank of this flight compared to other flights utilizing the resource
            within this time bin or within the applicable time range of this bin. Each flight must have
            a unique priority rank. 
          type: integer
          minimum: 0
          default: 0
        is_dcb_compliant:
          description: |-
            True if this flight is DCB compliant.  False if this flight is DCB non-compliant within
            this time bin or within the applicable time range of this bin.  Used to indicate which flights 
            should be changed and which flights can remain. 
          type: boolean
          default: true
    DemandCapacityImbalanceInterval:
      type: object
      description: >-
        Returns a time range, imbalance status for the range, and all operation OVNs contributing to 
        demand within that time range.
      required:
        - time_start
        - time_end
        - imbalance_magnitude
        - imbalance_status
        - operations
      properties:
        time_start:
          description: Beginning time of the time bin for computing this demand capacity imbalance status. If the capacity requirements
            are based on rate or an instantaneous limit, this value will be the time when that capacity rule began. Must be before time_end.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        time_end:
          description: End time of the time bin for computing this demand capacity imbalance status. Can be empty if the capacity rule
            in place is an instantaneous or rate limit.  If included, must be after time_start.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'     
        imbalance_magnitude:
          type: number
          format: double
          description: The magnitude of demand capacity imbalance. Negative values indicate available capacity, zero indicates at capacity, 
            and positive values indicate over capacity
        imbalance_status:
          type: string
          enum:
            - OVER_CAPACITY
            - AT_CAPACITY
            - UNDER_CAPACITY
          description: >-
            string indicating whether corresponding resource is over, at or under capacity
        operations:
          type: array
          items:
            $ref: '#/components/schemas/ContributingOperation'
          minItems: 0
          description: >-
            Summary of all operations contributing to the reported demand at this resource at this time bin
    ResourceDemandCapacityImbalances:
      type: object
      description: >-
        a set of properties describing a resource imbalance status that includes a resource reference from the adaptation data, 
        the start and end time of the time bin used for demand-capacity imbalance computation, the magnitude of the imbalance, 
        the imbalance status, and a potentially empty set of OVNs for all operations contributing to the reported demand at this resource at this time bin
      required:
        - resource_id
        - resource_imbalances
      properties:
        resource_id:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        resource_imbalances:
          type: array
          items:
            $ref: '#/components/schemas/DemandCapacityImbalanceInterval'
          description: List of imbalance time ranges and determinations for the resource. 
    ResourceAvailabilityList:
      description: A list of resources and associated time intervals within the provided start/end 
        duration during which the demand is under the capacity of the resource.  
      type: object
      required:
        - resource_availability
      properties:
        resource_availability:
          type: array
          items:
            $ref: '#/components/schemas/ResourceAvailability'
    ResourceAvailability:
      description: Returns a list of time intervals within the provided start/end duration during which
        the demand is under the capacity of the resource.  
      type: object
      required:
        - resource_id
        - available_intervals
      properties:
        resource_id:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        available_intervals:
          type: array
          items:
            $ref: '#/components/schemas/ResourceAvailabilityInterval'
    ResourceAvailabilityInterval:
      description: An interval of time when the resource is UNDER_CAPACITY.
      type: object
      required:
        - time_start
        - time_end
      properties:
        time_start:
          description: Beginning time of this availability time interval. Must be before time_end.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
        time_end:
          description: End time of this availability time interval. Must be after time_start.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/Time'
    PutOperationalIntentDetailsParameters:
      required:
      - operational_intent_id
      - subscriptions
      type: object
      properties:
        operational_intent_id:
          description: ID of operational intent that has changed.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        operational_intent:
          description: |-
            Full information about the operational intent that has changed.  If this field is omitted,
            the operational intent was deleted.  The `ovn` field in the nested `reference` must be
            populated.
          $ref: '../OIM/astm-uam-psu-oim-0.0.0.yaml#/components/schemas/OperationalIntent'
        subscriptions:
          minItems: 1
          type: array
          description: Subscription(s) prompting this notification.
          items:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionState'
      description: |-
        Parameters of a message informing of detailed information for a peer operational intent.
        Pushed (by a client, not the DSS) directly to clients with subscriptions when
        another client makes a change to airspace within a cell with a subscription.
    PutResourceDetails:
      required:
        - resource_id
        - subscriptions
        - resource_details
      type: object
      properties:
        resource_id:
          description: ID of resource.
          $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityID'
        subscriptions:
          minItems: 1
          type: array
          description: Subscription(s) prompting this notification.
          items:
            $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/SubscriptionState'
        resource_details:
          $ref: '../RIS/astm-uam-psu-ris-0.0.0.yaml#/components/schemas/ResourceDetails'
    RequiredAdditionalOperations:
      type: array
      description: >
        Operational intents that must be evaluated by DCB for potential relevance.
        If they intersect relevant resources and time windows, DCB must include them
        in the demand-capacity check.

        These operations may originate from DSS (e.g., following a rejection due to missing
        dependencies) or other coordination mechanisms. If any of the referenced operations
        are not already cached or are outdated, DCB must retrieve their details from the
        managing PSU in its OIM role using the provided access information.
      items:
        $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityAccessInfo'     
    RequiredAdditionalResources:
      type: array
      description: >
        Resources that must be evaluated by DCB for potential relevance in the
        demand-capacity check. If these resources intersect with the operational intents
        relevant spatial or temporal extents, they must be included in the evaluation.

        These resources may originate from the DSS (e.g., after a failed validation due to
        missing dependencies) or other coordination mechanisms. If any of the referenced
        resources are not already cached or are outdated, the DCB must retrieve their
        details from the managing PSU in its RIS role using the provided access information.
      items:
        $ref: '../DSS/astm-uam-psu-dss-0.0.0.yaml#/components/schemas/EntityAccessInfo'            
               
